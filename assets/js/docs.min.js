$(function(){
    $('html').toggleClass('no-js js');

    // build side menu
    var html = '';

    $('.bs-docs-section h1').each(function () {
        var mainheader = $this = $(this);
        var subheaders = $this.nextUntil('h1', 'h2');
        
        if (mainheader.length) {
            html += '<li><a href="#' + mainheader[0].id +'">' + mainheader.clone().children().remove().end().text() + '</a>';

            if (subheaders.length) {
                html+= '<ul class="nav">';
                subheaders.each(function() {
                  html +=  '<li><a href="#' + this.id +'">' + $(this).clone().children().remove().end().text() + '</a></li>';
                  
                  var subsubheaders = subheaders.nextUntil('h2', 'h3');
                  if (subsubheaders.length) {
                  html+= '<ul class="nav">';
                  subsubheaders.each(function() {
                  html +=  '<li><a href="#' + this.id +'">' + $(this).clone().children().remove().end().text() + '</a></li>';
                  });
                                  
                  html+= '</ul>';
                  }
                
                });
               
                html+= '</ul>';
            }

            html += '</li>';
        }
    });

    if (html != '') {
        $('.bs-docs-sidenav').html(html);
        $('[role=complementary]').show();
        $('[role=main]').toggleClass('col-md-12 col-md-9');

        $('[role=complementary]').Stickyfill();
    }

    $('body').scrollspy({
        target: ".bs-docs-sidebar"
    });
});
